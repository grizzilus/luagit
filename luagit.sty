\ProvidesPackage{luagit}[2015/04/17 v0.5.0]

\newcommand{\gitpartialcommit}[1]{}
\newcommand{\gitcurrentcommit}{}
\newcommand{\gitstatus}{}

\ifnum\directlua{tex.sprint(os.execute())}=1\relax
    \directlua{require("luagit")}

    \renewcommand{\gitpartialcommit}[1]{\directlua{print_head(#1)}}

    \renewcommand{\gitcurrentcommit}{\gitpartialcommit{40}}

    \renewcommand{\gitstatus}{\directlua{tex.sprint(git_status())}}
\fi
